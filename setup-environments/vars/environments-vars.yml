---
# Environments definition - add new environments here
environments:

  repo: estafet-microservices-scrum

  setup:
    - name: nexus-setup    
    - name: github-webhook-setup

    - name: mq-namespace-setup
      colour: blue    
      amq_user: amq
      amq_password: amq
      templates_project: openshift

    - name: mq-namespace-setup
      colour: green    
      amq_user: amq
      amq_password: amq
      templates_project: openshift

  teardown:
    - name: github-webhook-teardown
    - name: delete-mq-namespace
      colour: blue  
    - name: delete-mq-namespace
      colour: green  

  monitoring:
    - name: pgadmin-setup

  stages:
    - name: build
      display: Build
      description: Build Environment 
      role: edit
      next: test
      setup:
        - name: jaeger-setup
        - name: external-postgres-setup
        - name: amq-setup    
          amq_user: amq
          amq_password: amq
          templates_project: openshift
        - name: wiremock-setup  
          tag: 2.25.1
          expose: false    
  
    - name: test
      display: Test
      description: Test Environment
      test_repo: estafet-microservices-scrum-qa
      role: edit
      next: perf
      setup:
        - name: jaeger-setup
        - name: external-postgres-setup
        - name: amq-setup    
          amq_user: amq
          amq_password: amq    
          templates_project: openshift
  
    - name: perf
      display: Performance
      description: Performance Test Environment
      test_repo: estafet-microservices-scrum-qa-perf
      role: view
      next: prod
      setup:
        - name: jaeger-setup
        - name: external-postgres-setup
        - name: amq-setup    
          amq_user: amq
          amq_password: amq    
          templates_project: openshift
  
    - name: prod
      display: Production
      description: Production Environment
      test_repo: estafet-microservices-scrum-qa-prod
      next: end    
      setup:
        - name: jaeger-setup
        - name: external-postgres-setup
          templates_project: openshift
